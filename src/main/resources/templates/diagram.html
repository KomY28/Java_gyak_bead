<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Diagram - NB1</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" th:href="@{/assets/css/main.css}" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="is-preload">

<div id="wrapper">
    <div id="main">
        <div class="inner">
            <header id="header">
                <a th:href="@{/}" class="logo"><strong>NB1 Adatbázis</strong> Statisztika</a>
            </header>
            <section>
                <header class="main">
                    <h1>Csapatok létszáma</h1>
                </header>
                <p>Az alábbi diagram az adatbázisban szereplő csapatok játékosainak számát mutatja.</p>
                <div style="width: 80%; margin: auto;">
                    <canvas id="myChart"></canvas>
                </div>
            </section>
        </div>
    </div>

    <div id="sidebar">
        <div class="inner">
            <nav id="menu">
                <header class="major"><h2>Menü</h2></header>
                <ul>
                    <li><a th:href="@{/}">Főoldal</a></li>
                    <li><a th:href="@{/database}">Adatbázis (Lista)</a></li>
                    <li><a th:href="@{/diagram}" class="button fit">Diagramok</a></li>
                    <li><a th:href="@{/rest}">REST API</a></li>
                    <li><a th:href="@{/contact}">Kapcsolat</a></li>
                    <li sec:authorize="isAuthenticated()"><a th:href="@{/messages}">Üzenetek</a></li>
                    <li sec:authorize="isAuthenticated()"><a th:href="@{/crud}">CRUD Műveletek</a></li>
                    <li sec:authorize="hasRole('ADMIN')"><a th:href="@{/admin}" style="color: red;">Admin Felület</a></li>
                    <hr>
                    <li sec:authorize="!isAuthenticated()"><a th:href="@{/login}">Belépés</a></li>
                    <li sec:authorize="isAuthenticated()">
                        <form th:action="@{/logout}" method="post"><input type="submit" value="Kijelentkezés" /></form>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>

<script th:src="@{/assets/js/jquery.min.js}"></script>
<script th:src="@{/assets/js/browser.min.js}"></script>
<script th:src="@{/assets/js/breakpoints.min.js}"></script>
<script th:src="@{/assets/js/util.js}"></script>
<script th:src="@{/assets/js/main.js}"></script>

<script th:inline="javascript">
    /*<![CDATA[*/
    var teamLabels = [[${labels}]];
    var teamData = [[${data}]];
    /*]]>*/
</script>

<script>
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: teamLabels,
            datasets: [{
                label: 'Játékosok száma',
                data: teamData,
                backgroundColor: 'rgba(54, 162, 235, 0.6)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: { beginAtZero: true, ticks: { stepSize: 1 } }
            }
        }
    });
</script>

</body>
</html>